<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Personalized Suggestions - CareerLens</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
    <style>
        body {
            background: linear-gradient(to right, #6a11cb, #2575fc);
            min-height: 100vh;
            color: white;
            font-family: Arial, sans-serif;
            padding: 30px 0;
        }

        .container {
            max-width: 1000px;
        }

        .header {
            position: relative;
            margin-bottom: 40px;
        }

        .header h2 {
            font-weight: bold;
            text-align: center;
            color: white;
        }

        .btn-back {
            position: absolute;
            top: 0;
            left: 0;
            background-color: #35b2dcff;
            border-color: #3554dcff;
            font-weight: bold;
            color: white;
        }

        .btn-back:hover {
            background-color: #23a7c8ff;
            border-color: #232ec8ff;
            color: white;
        }

        .suggestion-card {
            background: white;
            border-radius: 15px;
            padding: 25px;
            margin-bottom: 20px;
            box-shadow: 0 4px 15px rgba(0,0,0,0.2);
            color: #333;
            border-left: 5px solid #4D96FF;
            transition: all 0.3s;
        }

        .suggestion-card:hover {
            transform: translateX(5px);
            box-shadow: 0 6px 20px rgba(0,0,0,0.25);
        }

        .suggestion-text {
            font-size: 1.1rem;
            margin: 0;
            color: #555;
        }

        .no-suggestions {
            background: white;
            border-radius: 15px;
            padding: 50px;
            text-align: center;
            color: #666;
            box-shadow: 0 4px 15px rgba(0,0,0,0.2);
        }

        .info-box {
            background: rgba(255, 255, 255, 0.1);
            border-radius: 10px;
            padding: 15px;
            margin-bottom: 30px;
            text-align: center;
        }
    </style>
</head>
<body>
<div class="container">
    <div class="header">
        <a href="{{ url_for('dashboard') }}" class="btn btn-back">‚Üê Back</a>
        <h2>üîç Personalized Suggestions</h2>
    </div>

    {% if readiness %}
    <div class="readiness-card" style="background: white; border-radius: 20px; padding: 40px; margin-bottom: 30px; text-align: center; box-shadow: 0 6px 20px rgba(0,0,0,0.2);">
        <h3 style="color: #2575fc; margin-bottom: 20px;">Overall Placement Readiness</h3>
        <div style="font-size: 3rem; font-weight: 900; color: {% if readiness.score >= 80 %}#28a745{% elif readiness.score >= 65 %}#ffc107{% elif readiness.score >= 50 %}#fd7e14{% else %}#dc3545{% endif %};">
            {{ readiness.score }}%
        </div>
        <div style="font-size: 1.5rem; color: #666; font-weight: 600; margin: 15px 0;">
            {{ readiness.status }}
        </div>
        <p style="color: #777; font-size: 1.1rem; margin-bottom: 10px;">{{ readiness.message }}</p>
        <p style="color: #999; font-size: 0.9rem;">Based on {{ readiness.total_quizzes }} quiz attempts</p>
    </div>
    {% endif %}

    <div class="info-box">
        <p style="margin: 0;">AI-powered analysis of your performance. Focus on high-priority topics to improve faster!</p>
    </div>

    {% if suggestions %}
        {% for s in suggestions %}
        <div class="suggestion-card" style="border-left-color: {% if s.priority == 3 %}#dc3545{% elif s.priority == 2 %}#ffc107{% else %}#28a745{% endif %};">
            <div style="display: flex; justify-content: space-between; align-items: start; margin-bottom: 15px;">
                <h5 style="color: #2575fc; margin: 0; font-weight: 700;">{{ s.topic }}</h5>
                <span style="background: {% if s.priority == 3 %}#dc3545{% elif s.priority == 2 %}#ffc107{% else %}#28a745{% endif %}; color: white; padding: 5px 15px; border-radius: 20px; font-size: 0.85rem; font-weight: 600;">
                    {{ s.level }}
                </span>
            </div>
            <div style="background: #f8f9fa; padding: 15px; border-radius: 10px; margin-bottom: 15px;">
                <div style="display: flex; justify-content: space-between; margin-bottom: 8px;">
                    <span style="color: #666; font-weight: 600;">Score:</span>
                    <span style="color: #333; font-weight: 700;">{{ s.percentage }}%</span>
                </div>
                <div style="display: flex; justify-content: space-between;">
                    <span style="color: #666; font-weight: 600;">Attempts:</span>
                    <span style="color: #333; font-weight: 700;">{{ s.attempts }}</span>
                </div>
            </div>
            <p style="color: #555; margin-bottom: 10px; font-size: 1rem;">{{ s.recommendation }}</p>
            <div style="background: linear-gradient(to right, #6a11cb, #2575fc); color: white; padding: 10px 15px; border-radius: 8px; font-weight: 600; font-size: 0.9rem;">
                Action: {{ s.action }}
            </div>
        </div>
        {% endfor %}
    {% else %}
        <div class="no-suggestions">
            <h4>üéØ No Data Yet</h4>
            <p>Complete some quizzes to get AI-powered personalized recommendations!</p>
            <a href="{{ url_for('dashboard') }}" style="display: inline-block; margin-top: 20px; background: linear-gradient(to right, #6a11cb, #2575fc); color: white; padding: 12px 30px; border-radius: 8px; text-decoration: none; font-weight: 600;">
                Take Your First Quiz
            </a>
        </div>
    {% endif %}
</div>

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>